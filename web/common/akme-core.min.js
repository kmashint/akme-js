if(typeof console==="undefined"){console={log:function(){},info:function(){},warn:function(){},error:function(){},assert:function(){}};}if(typeof console.logEnabled==="undefined"){console.logEnabled=false;}if(!Function.prototype.bind){Function.prototype.bind=function(b){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var a=Array.prototype.slice,f=a.call(arguments,1),e=this,c=function(){},d=function(){return e.apply(this instanceof c?this:b||window,f.concat(a.call(arguments)));};c.prototype=this.prototype;d.prototype=new c();return d;};}if(!Function.prototype.getShortName){Function.prototype.getShortName=function(b){var a=String(b?b.name:this.name);if(a){return a.substring(a.lastIndexOf(".")+1);}else{return;}};}if(!Object.getPrototypeOf){if({}.hasOwnProperty("__proto__")){Object.getPrototypeOf=function(a){return a.__proto__;};}else{Object.getPrototypeOf=function(a){return a.constructor.prototype;};}}if(!Object.keys){Object.keys=(function(){var c=Object.prototype.hasOwnProperty,d=!({toString:null}).propertyIsEnumerable("toString"),b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=b.length;return function(g){if(typeof g!=="object"&&typeof g!=="function"||g===null){throw new TypeError("Object.keys called on non-object");}var e=[];for(var h in g){if(c.call(g,h)){e.push(h);}}if(d){for(var f=0;f<a;f++){if(c.call(g,b[f])){e.push(b[f]);}}}return e;};})();}if(!Array.indexOf){Array.indexOf=(Array.prototype.indexOf)?function(a){return Array.prototype.indexOf.apply(a,Array.prototype.slice.call(arguments,1));}:function(e,c){if(e==null){throw new TypeError();}var d=Object(e);var a=d.length>>>0;if(a===0){return -1;}var f=0;if(arguments.length>1){f=Number(arguments[2]);if(f!=f){f=0;}else{if(f!=0&&f!=Infinity&&f!=-Infinity){f=(f>0||-1)*Math.floor(Math.abs(f));}}}if(f>=a){return -1;}var b=f>=0?f:Math.max(a-Math.abs(f),0);for(;b<a;b++){if(b in d&&d[b]===c){return b;}}return -1;};}if(!Array.every){Array.every=(Array.prototype.every)?function(a){return Array.prototype.every.apply(a,Array.prototype.slice.call(arguments,1));}:function(f,b){if(f==null){throw new TypeError();}var e=Object(f);var a=e.length>>>0;if(typeof b!="function"){throw new TypeError();}var d=arguments[2];for(var c=0;c<a;c++){if(c in e&&!b.call(d,e[c],c,e)){return false;}}return true;};}if(!Array.filter){Array.filter=(Array.prototype.filter)?function(a){return Array.prototype.filter.apply(a,Array.prototype.slice.call(arguments,1));}:function(g,b){if(g==null){throw new TypeError();}var f=Object(g);var a=f.length>>>0;if(typeof b!="function"){throw new TypeError();}var e=[];var d=arguments[2];for(var c=0;c<a;c++){if(c in f){var h=f[c];if(b.call(d,h,c,f)){e.push(h);}}}return e;};}if(!Array.forEach){Array.forEach=(Array.prototype.forEach)?function(a){Array.prototype.forEach.apply(a,Array.prototype.slice.call(arguments,1));}:function(e,h,b){var d,c;if(e==null){throw new TypeError(" this is null or not defined");}var g=Object(e);var a=g.length>>>0;if({}.toString.call(h)!="[object Function]"){throw new TypeError(h+" is not a function");}if(b){d=b;}c=0;while(c<a){var f;if(c in g){f=g[c];h.call(d,f,c,g);}c++;}};}if(!Array.map){Array.map=(Array.prototype.map)?function(a){return Array.prototype.map.apply(a,Array.prototype.slice.call(arguments,1));}:function(a,j,i){var c,b,d;if(a==null){throw new TypeError(" this is null or not defined");}var f=Object(a);var g=f.length>>>0;if({}.toString.call(j)!="[object Function]"){throw new TypeError(j+" is not a function");}if(i){c=i;}b=new Array(g);d=0;while(d<g){var e,h;if(d in f){e=f[d];h=j.call(c,e,d,f);b[d]=h;}d++;}return b;};}if(!Array.some){Array.some=(Array.prototype.some)?function(a){return Array.prototype.some.apply(a,Array.prototype.slice.call(arguments,1));}:function(f,b){if(f==null){throw new TypeError();}var e=Object(f);var a=e.length>>>0;if(typeof b!=="function"){throw new TypeError();}var d=arguments[2];for(var c=0;c<a;c++){if(c in e&&b.call(d,e[c],c,e)){return true;}}return false;};}if(!Array.reduce){Array.reduce=(Array.prototype.reduce)?function(a){return Array.prototype.reduce.apply(a,Array.prototype.slice.call(arguments,1));}:function(c,d){var b=0,a=this.length>>0,e;if(typeof d!=="function"){throw new TypeError("First argument is not callable");}if(arguments.length<3){if(a===0){throw new TypeError("Array length is 0 and no second argument");}e=c[0];b=1;}else{e=arguments[2];}while(b<a){if(b in this){e=d.call(undefined,e,this[b],b,this);}++b;}return e;};}if(!Array.reduceRight){Array.reduceRight=(Array.prototype.reduceRight)?function(a){return Array.prototype.reduceRight.apply(a,Array.prototype.slice.call(arguments,1));}:function(e,b){if(e==null){throw new TypeError();}var d=Object(e);var a=d.length>>>0;if(typeof b!=="function"){throw new TypeError();}if(a===0&&arguments.length===2){throw new TypeError();}var c=a-1;var f;if(arguments.length>=3){f=arguments[2];}else{do{if(c in this){f=this[c--];break;}if(--c<0){throw new TypeError();}}while(true);}while(c>=0){if(c in d){f=b.call(undefined,f,d[c],c,d);}c--;}return f;};}if(!this.akme){this.akme={THIS:this,WHITESPACE_TRIM_REGEXP:/^\s*|\s*$/gm,PRINTABLE_EXCLUDE_REGEXP:/[^\x20-\x7e\xc0-\xff]/g,concat:function(c,b){for(var a=0;a<b.length;a++){c[c.length]=(b[a]);}return c;},clone:function(b){if(b===null||b===undefined){return b;}if(typeof b.clone==="function"){return b.clone();}var c=new b.constructor();for(var a in b){if(b.hasOwnProperty(a)){c[a]=b[a];}}return c;},copy:function(c,b){if(b===null||typeof b==="undefined"){return c;}for(var a in b){if(b.hasOwnProperty(a)){c[a]=b[a];}}return c;},copyAll:function(c,b){if(b===null||typeof b==="undefined"){return c;}for(var a in b){c[a]=b[a];}return c;},copyExisting:function(c,b){if(b===null||typeof b==="undefined"){return c;}for(var a in b){if(a in c){c[a]=b[a];}}return c;},copyArrayToObject:function(e,b,c,d){if(typeof d!="undefined"){for(var a=0;a<b.length;a++){e[b[a][c]]=b[a][d];}}else{for(var a=0;a<b.length;a++){e[b[a][c]]=b[a];}}return e;},copyMapKeys:function(b,c){for(var a in c){b[b.length]=a;}return b;},getMapKeys:function(a){return this.copyMapKeys([],a);},getProperty:function(c,b){if(typeof b==="string"||b instanceof String){b=b.split(".");}var e=c;var d=b.length;for(var a=0;a<d;a++){if(b[a] in e){e=e[b[a]];}else{return;}}return e;},setProperty:function(c,b,d){if(typeof b==="string"||b instanceof String){b=b.split(".");}var f=c;var e=b.length-1;for(var a=0;a<e;a++){if(b[a] in f){f=f[b[a]];}else{f=f[b[a]]={};}}f[b[e]]=d;return f;},extend:function(b,c){if(typeof c==="object"){var a=b;b=c;c=a;}else{if(!c){c=function(){};}}c.prototype=typeof b==="function"?new b:b;c.constructor=c.prototype.constructor;c.prototype.constructor=c;return c;},extendDestroy:function(b,a){this.extendFunction(b,"destroy",a,true);},extendFunction:function(c,b,e,d){var a=c[b];if(a){if(d){c[b]=function(){e.apply(this,arguments);a.apply(this,arguments);};}else{c[b]=function(){a.apply(this,arguments);e.apply(this,arguments);};}}else{c[b]=e;}},newApplyArgs:function(fn,args){if(!args||args.length===0){return new fn();}switch(args.length){case 1:return new fn(args[0]);case 2:return new fn(args[0],args[1]);case 3:return new fn(args[0],args[1],args[2]);case 4:return new fn(args[0],args[1],args[2],args[3]);case 5:return new fn(args[0],args[1],args[2],args[3],args[4]);default:var buf=new Array(args.length);for(var i=0;i<args.length;i++){buf[i]="a["+i+"]";}return eval("(function(F,a){return new F("+buf.join(",")+");})(fn,args);");}},handleEvent:function(b){if(!b){return;}var a=Array.prototype.slice.call(arguments,1);if(typeof b==="function"){b.apply(undefined,a);}else{b.handleEvent.apply(b,a);}},fixHandleEvent:function(b){if(document.documentMode&&document.documentMode<9&&typeof b.handleEvent==="function"&&!b.handleEvent._ie8fix){var a=b.handleEvent;b.handleEvent=function(c){a.call(b,c);};b.handleEvent._ie8fix=true;}return b;},trim:function(a){return a.replace(this.WHITESPACE_TRIM_REGEXP,"");},padLeft:function(f,c,e){var d=String(f);if(d.length>=c){return d;}if(d.length+1==c){return e+d;}var b=new Array(1+(c>d.length?c-d.length:0));b[b.length-1]=d;return b.join(e?e:" ");},round2:function(a){return Math.round(a*100+0.5)/100;},round3:function(a){return Math.round(a*1000+0.5)/1000;},round:function(b,a){return Math.round(b/a+0.5)*a;},formatIsoDate:function(a){return a.getFullYear()+"-"+this.padLeft(a.getMonth()+1,2,"0")+"-"+this.padLeft(a.getDate(),2,"0");}};}if(!akme.core){akme.core={};}(function(c,b){if(c.getProperty(c.THIS,b)){return;}function d(){}c.extend(c.copyAll(d,{CLASS:b}),{clear:null,flush:null,sync:null,syncDecorator:null,find:null,findOne:null,findDecorator:null,read:null,readDecorator:null,readMany:a,write:null,remove:null});c.setProperty(c.THIS,b,d);function a(h){var e=[];if(typeof h==="undefined"||h===null){return e;}if(h instanceof Array){for(var g=0;g<h.length;g++){e[e.length]=this.read(h[g]);}}else{if(h instanceof Object){for(var f in h){e[e.length]=this.read(f);}}else{if(typeof h==="function"){e[e.length]=this.read(h());}else{e[e.length]=this.read(h);}}}return e;}})(akme,"akme.core.Access");(function(c,b){if(c.getProperty(c.THIS,b)){return;}function a(){}c.copyAll(a,{CLASS:b});c.copyAll(a.prototype,{toString:d});c.setProperty(c.THIS,b,a);function d(){return this.constructor.CLASS+c.formatJSON(this);}})(akme,"akme.core.Data");(function(e,b){if(e.getProperty(e.THIS,b)){return;}function g(){return this.privates.call(g);}function f(){var t={map:{},ary:[]};function s(){return this===g?t:undefined;}this.length=t.ary.length;this.privates=s;}e.extend(e.copyAll(f,{CLASS:b}),{size:k,linkMapTo:a,keys:j,key:r,keySlice:o,value:n,values:c,valueSlice:l,get:p,set:i,remove:q,clear:m,copyFrom:d,copyAllFrom:h});e.setProperty(e.THIS,b,f);function a(t,s){t[s]=g.call(this).map;return this;}function k(){return g.call(this).ary.length;}function j(){return g.call(this).ary.slice(0);}function r(s){return g.call(this).ary[s];}function o(t,s){return s?g.call(this).ary.slice(t,s):g.call(this).ary.slice(t);}function n(s){var t=g.call(this);return t.map[t.ary[s]];}function c(){var u=g.call(this);var t=new Array(u.ary.length);for(var s=0;s<u.ary.length;s++){t[s]=u.map[u.ary[s]];}return t;}function l(w,s){var v=g.call(this);if(!(s>=0)){s=v.ary.length;}var u=new Array(s-w);for(var t=w;t<s;t++){u[t-w]=v.map[v.ary[t]];}return u;}function p(s){return g.call(this).map[s];}function i(s,u){var t=g.call(this);if(!(s in t.map)){t.ary[t.ary.length]=s;this.length=t.ary.length;}t.map[s]=u;}function q(t){var u=g.call(this);if(!(t in u.map)){return;}for(var s=0;s<u.ary.length;s++){if(u.ary[s]===t){u.ary.splice(s,1);this.length=u.ary.length;break;}}delete u.map[t];}function m(){var t=g.call(this);t.ary.splice(0,t.ary.length);this.length=0;for(var s in t.map){delete t.map[s];}}function d(w,v,x){var s=typeof x!=="undefined";if(w instanceof Array||typeof w.length==="number"){for(var u=0;u<w.length;u++){this.set(w[u][v],s?w[u][x]:w[u]);}}else{for(var t in w){if(w.hasOwnProperty(t)){this.set(w[t][v],s?w[t][x]:w[t]);}}}return this;}function h(v,u,w){var s=typeof w!=="undefined";for(var t in v){this.set(v[t][u],s?v[t][w]:v[t]);}return this;}})(akme,"akme.core.IndexedMap");(function(e,d){if(e.getProperty(e.THIS,d)){return;}function b(){return this.events.call(b);}function h(){if(console.logEnabled){console.log(this.constructor.CLASS+" injecting "+d+" arguments.length "+arguments.length);}var j={};function i(){return this===b?j:undefined;}this.events=i;this.onEvent=g;this.unEvent=a;this.doEvent=f;e.extendDestroy(this,c);}e.extend(Object,e.copyAll(h,{CLASS:d}));e.setProperty(e.THIS,d,h);function c(){if(console.logEnabled){console.log(this.constructor.CLASS+".destroy()");}var j=b.call(this);for(var i in j){delete j[i];}}function g(k,l){if(!(typeof l==="function"||typeof l.handleEvent==="function")){throw new TypeError(this.constructor.CLASS+".onEvent given neither function(ev){...} nor { handleEvent:function(ev){...} }");}var j=b.call(this);var i=j[k];if(!i){i=[];j[k]=i;}i.push(e.fixHandleEvent(l));}function a(m,n){var k=b.call(this);var j=k[m];if(!j){return;}for(var l=0;l<j.length;l++){if(j[l]===n){j.splice(l,1);}}}function f(m){var k=b.call(this);var j=k[m.type];if(j){for(var l=0;l<j.length;l++){var n=j[l];if(typeof n==="function"){n(m);}else{n.handleEvent.call(n,m);}}}}})(akme,"akme.core.EventSource");(function(e,p){if(e.getProperty(e.THIS,p)){return;}var g,n=0,h={},f=null;var o={has:l,get:c,set:j,remove:d,getIdCount:k,getIdArray:m,getRefreshDate:a,isFunction:b,refresh:i};e.core.EventSource.apply(o);o.onEvent("refresh",function(q){f=new Date();});o.refresh();g=o;e.setProperty(e.THIS,p,function(){return g;});function i(){e.CONTEXT=h;this.doEvent({type:"refresh",context:g});}function a(){return f;}function l(q){return(q in h);}function c(r){var q=h[r];if(typeof q==="function"){q=akme.newApplyArgs(q,Array.prototype.slice.call(arguments,1));}if(q===undefined){q=null;}this.doEvent({type:"get",context:g,id:r,instance:q});return q;}function j(s,q){if(!(s in h)){n++;}var r=h[s];h[s]=q;this.doEvent({type:"set",context:g,id:s,instance:q,oldInstance:r});return r;}function d(r){if(r in h){n--;}var q=h[r];delete h[r];this.doEvent({type:"remove",context:g,id:r,instance:q});return q;}function k(){return n;}function m(){var q=[],r=0;for(key in h){q[r++]=key;}return q;}function b(q){return typeof h[q]==="function";}})(akme,"akme.getContext");this.DOMParser=this.DOMParser||function(){this.xmldoc=null;try{if(!this.xmldoc){this.xmldoc=new ActiveXObject("Msxml2.DOMDocument");}}catch(a){}if(!this.xmldoc){throw new Error("This browser does not support DOMParser or Msxml2.DOMDocument.");}this.xmldoc.async=false;this.parseFromString=function(c,d){this.xmldoc.loadXML(c);if(this.xmldoc.parseError.errorCode!=0){var b=this.xmldoc.parseError;throw new Error("DOMParser error "+b.errorCode+" at line "+b.line+" pos "+b.linepos+": "+b.reason);}return this.xmldoc;};return this;};if(!window.XMLSerializer){window.XMLSerializer=function(){};}if(!window.XMLSerializer.prototype.serializeToString){window.XMLSerializer.prototype.serializeToString=function(a){return a.xml;};}if(!this.XMLHttpRequest){this.XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0");}catch(a){throw new Error("This browser does not support XMLHttpRequest.");}};}akme.copyAll(this.akme,{_html5:null,isIE8:"documentMode" in document&&document.documentMode<9,isW3C:"addEventListener" in window,onEvent:function(b,c,a){if("click"===c&&window.Touch&&this.onEventTouch){this.onEventTouch(b,a);}else{if(this.isW3C){b.addEventListener(c,a,false);}else{b.attachEvent("on"+c,typeof a.handleEvent==="function"?this.fixHandleEvent(a).handleEvent:a);}}},onContent:function(c){var b=document;var d="DOMContentLoaded";if(this.isW3C){b.addEventListener(d,c,false);}else{if(a()){b.attachEvent("onreadystatechange",a);}function a(e){if("loaded"!=b.readyState&&"complete"!=b.readyState){return true;}else{if(typeof c==="function"){c.call(b,{type:d});}else{c.handleEvent.call(c,{type:d});}}}}},onLoad:function(a){this.onEvent(window,"load",a);},onUnload:function(a){this.onEvent(window,"unload",a);},unEvent:function(b,c,a){if("click"===c&&window.Touch&&this.unEventTouch){this.unEventTouch(b,a);}else{if(this.isW3C){b.removeEventListener(c,a,false);}else{b.detachEvent("on"+c,typeof a.handleEvent==="function"?a.handleEvent:a);}}},fixHandleEvent:function(b){if(document.documentMode&&document.documentMode<9&&typeof b.handleEvent==="function"&&!b.handleEvent._ie8fix){var a=b.handleEvent;b.handleEvent=function(c){a.call(b,c);};b.handleEvent._ie8fix=true;}return b;},getEventElement:function(a){return(a.target.nodeType===1)?a.target:a.target.parentNode;},cancelEvent:function(a){if(a.preventDefault){a.preventDefault();a.stopPropagation();}else{a.returnValue=false;a.cancelBubble=true;}},getBaseHref:function(){var b=document.getElementsByTagName("base");return b.length!=0?b[0]["href"]:"";},getContextPath:function(){var b=document.getElementsByName("head")[0].getElementsByTagName("meta");for(var c=0;c<b.length;c++){if(b[c].name==="contextPath"){return b[c].content?b[c].content:"/.";}}return"/.";},isHtml5:function(){if(this._html5==null){var a=document.createElement("video");this._html5=typeof a.canPlayType==="function";}return this._html5;},parseJSON:function(b,a){return JSON.parse(b,a);},formatJSON:function(b,a){return JSON.stringify(b,a);},parseXML:function(a,b){return new DOMParser().parseFromString(a,b||"application/xml");},formatXML:function(a){return new XMLSerializer().serializeToString(a);},getElementByTagNameId:function(a,d,e){var b=a.getElementsByTagName(d);for(var c=0;c<b.length;c++){if(e==b[c].id){return b[c];}}return null;},getElementsByTagName:function(a,b){return this.concat([],a.getElementsByTagName(b));},getElementsByTagNameClassName:function(d,a,f){var l=[];if(!d||!f){return l;}var h=f.split(" ");var k=d.getElementsByTagName(a);for(var c=0;c<k.length;c++){var e=k[c].className;if(!e){continue;}for(var b=0;b<h.length;b++){var f=h[b];var g=e.indexOf(f);if(g==-1){continue;}if((g==0||" "==e.charAt(g-1))&&(g+f.length==e.length||" "==e.charAt(g+f.length))){l.push(k[c]);}}}return l;},replaceChild:function(b,a,f){var e=b.replaceChild(a,f);if(e&&!this.isW3C){var c=e.getElementsByTagName("iframe");for(var d=0;d<c.length;d++){c[d].onload="";}var g=document.getElementById("recycleBin");if(g){g.appendChild(e);g.innerHTML="";}}return e;},replaceTextDataAsArrayOrNull:function(g,c){var b=null;if(!g||!g.length){return b;}var f=0;var e=g.indexOf("{");if(e!=-1){b=[];}else{return b;}for(;e!=-1;e=g.indexOf("{",f)){b.push(g.substring(f,e));f=e+1;e=g.indexOf("}",f);if(e!=-1){var d=g.substring(f,e);if(c[d]){b.push(c[d]);}else{b.push(g.substring(f-1,e+1));}f=e+1;}else{f=g.length;}}if(b.length){b.push(g.substring(f,g.length));}return b;},replaceNodeData:function(f,h){var c=[f];for(var l=c.pop();l!=null;l=c.pop()){var m=l.attributes;if(m){for(var e=0;e<m.length;e++){var g=m[e];var b=g.nodeName;var k=g.nodeValue;if(b.lastIndexOf("data--",6)==0){b=b.substring(6);l.removeAttribute(g.nodeName);var j=this.replaceTextDataAsArrayOrNull(k,h);if(j!=null){l.setAttribute(b,j.join(""));}}else{var j=this.replaceTextDataAsArrayOrNull(k,h);if(j!=null){g.nodeValue=j.join("");}}}}var n=l.childNodes;for(var e=0;e<n.length;e++){var d=n[e];switch(d.nodeType){case 1:c[c.length]=(d);case 3:case 4:var j=this.replaceTextDataAsArrayOrNull(d.nodeValue,h);if(j!=null){d.nodeValue=j.join("");}break;}}}},cloneNodeByCreateElement:function(e,d,a){var f=e.createElement(d.nodeName);for(var c=0;c<d.attributes.length;c++){var b=d.attributes[c].name;switch(b){case"class":b="className";break;default:break;}f[b]=d.attributes[c].value;}if(a&&d.innerHTML){f.innerHTML=d.innerHTML;}return f;},cloneTemplateNode:function(a,c){var b=a.cloneNode(true);b.id=c?c:"";b.style.display="";return b;},importNode:function(g,d){var i;var a=document.getElementById("recycleBin");var f=d.nodeName.toLowerCase();if("importNode" in g&&!("documentMode" in g&&g.documentMode==9)){i=g.createElement(f==="link"||f==="style"||f==="script"?"head":"div");if(f==="script"||f==="style"){i.appendChild(this.cloneNodeByCreateElement(g,d,true));}else{i.appendChild(g.importNode(d,true));}var c=i.firstChild;i.removeChild(c);if(a){a.appendChild(i);}return c;}else{if(f==="link"||f==="style"||f==="script"){i=this.cloneNodeByCreateElement(g,d);var b=d.xml;var e=b.indexOf(">");if(e+1<b.length){var h=b.substring(e+1,b.lastIndexOf("<"));if(h>""){if(f==="style"){i.styleSheet.cssText=h;}else{if(f==="script"){i.text=h;}}}}return i;}else{i=g.createElement("div");i.innerHTML=d.xml;var c=i.firstChild;i.removeChild(c);if(a){a.appendChild(i);}return c;}}},importElementsReplaceById:function(u,g,h){var t=[];var q=null;q={count:0,callbackFn:null,check:function(){if(console.logEnabled){console.log("scriptTracker.check count "+this.count);}if(this.count<1&&this.callbackFn){try{this.callbackFn();}catch(i){var a="scriptTracker.callbackFn: "+String(i);console.error(a);alert(a);}this.callbackFn=null;}},load:function(a){this.count++;a.onload=function(i){q.onload(i);};a.onreadystatechange=function(i){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"){q.onload(i);}};if(console.logEnabled){console.log("scriptTracker.load count "+this.count);}},onload:function(i){if(i){var a=akme.getEventElement(i);a.onload=null;a.onreadystatechange=null;}this.count--;this.check();}};var n=[g];for(var l=n.pop();l!=null;l=n.pop()){var d=l.childNodes;for(var p=0;p<d.length;p++){var f=d[p];if(f.nodeType==1){var m=f.getAttribute("id")>""?u.getElementById(f.getAttribute("id")):null;if(m){var c=this.importNode(u,f);var b=c.nodeName.toLowerCase();var k=b==="script"?c:null;var e=k?[k]:c.getElementsByTagName("script");if(e&&e.length>0){for(var o=0;o<e.length;o++){var r=e[o];var s=this.cloneNodeByCreateElement(u,r,false);q.load(s);if(r.text>""){s.text=r.text;}if(!k){akme.replaceChild(r.parentNode,s,r);}else{c=s;}}}akme.replaceChild(m.parentNode,c,m);t[t.length]=c;}else{n[n.length]=(f);}}}}if(h){q.callbackFn=h;}q.check();return t;},importNodeAppendChild:function(c,b){var d;if(c.ownerDocument){d=c.ownerDocument;}else{d=c;c=d.getElementsByTagName("body")[0];}var a=this.importNode(d,b);c.appendChild(a);return a;},toggleDisplay:function(a){a.style.display=a.style.display!="none"?"none":"";},});if(!akme.xhr){akme.xhr={DATE_1970:"Thu, 01 Jan 1970 00:00:00 GMT",HTTP_OK:200,HTTP_NO_CONTENT:204,HTTP_NOT_MODIFIED:304,CONTENT_TYPE:"Content-Type",CONTENT_BINARY:{"Content-Type":"application/octet-stream"},CONTENT_TEXT:{"Content-Type":"text/plain"},CONTENT_URLENCODED:{"Content-Type":"application/x-www-form-urlencoded"},CONTENT_HTML:{"Content-Type":"text/html"},CONTENT_XHTML:{"Content-Type":"application/xhtml+xml"},CONTENT_XML:{"Content-Type":"text/xml"},CONTENT_JSON:{"Content-Type":"application/json"},NO_CACHE_HEADER_MAP:{Pragma:"no-cache","Cache-Control":"no-cache, no-store, max-age=0, must-revalidate"},PRIVATE_CACHE_HEADER_MAP:{Pragma:"private","Cache-Control":"private"},PRIVATE_VALID_CACHE_HEADER_MAP:{Pragma:"private","Cache-Control":"private, must-revalidate"},PUBLIC_CACHE_HEADER_MAP:{Pragma:"public","Cache-Control":"public"},PUBLIC_VALID_CACHE_HEADER_MAP:{Pragma:"public","Cache-Control":"public, must-revalidate"},FUTURE_CACHE_HEADER_MAP:{Pragma:"public","Cache-Control":"public, max-age=900"},encodeMap:function(d){var c=[];if(!d){return"";}for(var b in d){var e=d[b];if(e&&e.constructor===Array){for(var a=0;a<e.length;a++){c.push(encodeURIComponent(b)+"="+encodeURIComponent(e[a]));}}else{c.push(encodeURIComponent(b)+"="+encodeURIComponent(e));}}return c.join("&");},open:function(d,a,b){var c=new XMLHttpRequest();c.open(d,a,b!=false);c.setRequestHeader("X-Requested-With","XMLHttpRequest");return c;},getXML:function(a){var b=this.open("GET",a,false);b.send(null);return this.getResponseXML(b);},getJSON:function(a){var b=this.open("GET",a,false);b.send(null);return this.getResponseJSON(b);},getResponseContentType:function(a){return a.contentType||a.getResponseHeader("Content-Type");},getResponseXML:function(c){var b=!!(c.responseXML&&c.responseXML.documentElement);var d=this.getResponseContentType(c);var a;if(c.responseXML&&!b&&"ActiveXObject" in window&&("application/xhtml+xml"==d)){a=new DOMParser().parseFromString(c.responseText,d);}else{a=c.responseXML;}if(a.documentElement.nodeName==="parsererror"){a=null;}return a;},getResponseJSON:function(b,a){return JSON.parse(b.responseText,a);},formatHttpHeaderName:function(c){var b=c.split("-");for(var d=0;d<b.length;d++){b[d]=b[d].charAt(0).toUpperCase()+b[d].substring(1);}return b.join("-");},fixHttpHeaderNames:function(d,e){for(var c=0;c<e.length;c++){e[c]=e[c].toLowerCase();}for(var b in d){if(Array.indexOf(e,b.toLowerCase())==-1){continue;}var a=this.formatHttpHeaderName(b);if(a!=b){headers[a]=headers[b];delete headers[b];}}},parseHeaders:function(e){var d={};for(var c=0,b=e.indexOf("\n");b!=-1;c=b+1,b=e.indexOf("\n",c)){var a=e.indexOf(": ",c);if(a!=-1){d[this.formatHttpHeaderName(e.substring(c,a))]=e.substring(a+2,b).split("\r")[0];}}return d;},callAsync:function(f,a,e,b,c){var d=this.open(f,a,true);this.callAsyncXHR(d,e,b,c);return d;},callAsyncXHR:function(i,a,b,d,f,e){i.open(a,b,true);i.setRequestHeader("X-Requested-With","XMLHttpRequest");for(var g in d){var c=this.formatHttpHeaderName(g);i.setRequestHeader(c,d[g]);if(c!=g){d[c]=d[g];delete d[g];}}for(var g in d){i.setRequestHeader(g,d[g]);}if(!(typeof f==="string"||f instanceof String)){if(/xml;|xml$/.test(d["Content-Type"])){f=akme.formatXML(f);}else{if(/json;|json$/.test(d["Content-Type"])){f=akme.formatJSON(f);}}}var h=this;i.onreadystatechange=function(){var l=this;if(!l.readyState!==4){return;}var k=h.parseHeaders(l.getAllResponseHeaders());var j;if(/xml;|xml$/.test(k["Content-Type"])){j=h.getResponseXML(l);}else{if(/json;|json$/.test(k["Content-Type"])){j=h.getResponseJSON(l);}else{j=l.responseText;}}akme.handleEvent(e,k,j);h=l=e=null;};if(typeof f!=="undefined"){i.send(f);}else{i.send();}return;}};}akme.cookieStorage=akme.cookieStorage||{name:"akme.cookieStorage",getItem:function(b){var c,d,a,f,e=document.cookie.split(";");for(c=0;c<e.length;c++){d=e[c].indexOf("=");a=e[c].substring(0,d);f=e[c].substring(d+1);a=a.replace(/^\s+|\s+$/g,"");if(a==b){return unescape(f);}}},setItem:function(a,c,b,e){var d=new Date();d.setDate(d.getDate()+(b?b:0));document.cookie=a+"="+escape(c)+(!b?"":"; expires="+d.toUTCString())+(!e?"":"; path="+e);},removeItem:function(a,b){document.cookie=a+"=; expires=0"+(!b?"":"; path="+b);}};if(!akme.core.MessageBroker){akme.core.MessageBroker=akme.extend(akme.copyAll(function(a){this.id=a.id;this.allowOrigins=a.allowOrigins;this.callbackKey=0;this.callbackMap={};this.callbackTime={};},{CLASS:"akme.core.MessageBroker"}),{destroy:function(){for(var a in this.callbackMap){delete this.callbackMap[a];}for(var a in this.callbackTime){delete this.callbackTime[a];}},newCallbackKey:function(){var a=this.callbackKey=(this.callbackKey+1)%65535;return a;},callAsync:function(h,g,d,e){var c=this.newCallbackKey();g.callback=this.id+".callbackMap."+c;var b=this;b.callbackMap[c]=function(j,i){delete b.callbackMap[c];delete b.callbackTime[c];akme.handleEvent(e,j,i);b=c=e=null;};b.callbackTime[c]=new Date().getTime();akme.xhr.fixHttpHeaderNames(g,["Content-Type"]);if(/xml;|xml$/.test(g["Content-Type"])&&!(d instanceof String)&&d instanceof Object){d=akme.formatXML(d);}else{if(/json;|json$/.test(g["Content-Type"])&&!(d instanceof String)&&d instanceof Object){d=akme.formatJSON(d);}}var f=this.formatMessage(g,d);var a=h.src.substring(0,h.src.indexOf("/",8));h.contentWindow.postMessage(f,a);return g.callback;},handleEvent:function(b){var d=true;for(var a=0;a<this.allowOrigins.length;a++){if(this.allowOrigins[a]===b.origin){d=false;break;}}if(d){console.warn(this.id+" deny "+b.origin);return;}var c=this.parseMessage(b.data);if(!c.headers.call||typeof this[c.headers.call]!=="function"){return;}this[c.headers.call].call(this,c.headers,c.content,b);},formatMessage:function(e,d){var b=[];b[b.length]="call: "+e.call;for(var c in e){if("call"!=c&&typeof e[c]!="undefined"){b[b.length]=c+": "+e[c];}}return b.join("\r\n")+"\r\n\r\n"+(d?d:"");},parseMessage:function(f){var d="";var e={};for(var c=0,b=f.indexOf("\n");b!=-1;c=b+1,b=f.indexOf("\n",c)){if(c+1>=b){d=f.substring(b+1);break;}var a=f.indexOf(": ",c);e[f.substring(c,a)]=f.substring(a+2,b).split("\r")[0];}return{headers:e,content:d};},XMLHttpRequest:function(b,d,c){var i=akme.xhr.open(b.method,b.url,true);var g=b.callback;var a=c.source;var e=c.origin;delete b.call;delete b.callback;delete b.method;delete b.url;if(b){for(var f in b){i.setRequestHeader(f,b[f]);}}var h=this;i.onreadystatechange=function(){var p=this;if(p.readyState!==4){return;}var o={call:"XMLHttpResponse",readyState:p.readyState,status:p.status?p.status:0,statusText:p.statusText?p.statusText:""};if(g){o.callback=g;}var m=p.getAllResponseHeaders();if(m){akme.copyAll(o,akme.xhr.parseHeaders(m));}var n=p.responseText?p.responseText:"";if(/xml;|xml$/.test(o["Content-Type"])||/html;|html$/.test(o["Content-Type"])){var l=n.indexOf("<!DOCTYPE ");var k=l!==-1?n.indexOf(">",l+10):-1;if(k!==-1&&(n.lastIndexOf(" SYSTEM ",k)!==-1||(document.documentMode&&document.documentMode<9&&n.lastIndexOf(" PUBLIC ",k)===-1))){n=n.substring(0,l)+n.substring(n.indexOf("<",k+1));}}var j=h.formatMessage(o,n);if(window.console){console.log(h.id+" "+location.protocol+"//"+location.host+" XMLHttpRequest postMessage back "+String(c.origin||e));}if(c.source){c.source.postMessage(j,c.origin);}else{a.postMessage(j,e);}h=p=g=c=a=e=null;};i.send(d||null);},XMLHttpResponse:function(d,b){var c=akme.getProperty(window,d.callback);if(c&&(d.status==200||d.status==204||d.status==304)){if(/xml;|xml$/.test(d["Content-Type"])){var a=akme.parseXML(b,"application/xml");if(c&&typeof a==="object"&&("childNodes" in a)){if(a.firstChild.nodeName.lastIndexOf(":Envelope")!==-1&&a.firstChild.lastChild.nodeName.lastIndexOf(":Body")!==-1){a=a.firstChild.lastChild.firstChild;}}akme.handleEvent(c,d,a);}else{if(/json;|json$/.test(d["Content-Type"])){var e=akme.parseJSON(b);akme.handleEvent(c,d,e);}else{akme.handleEvent(c,d,b);}}return;}if(console.logEnabled){alert(akme.formatJSON(d)+"\n\n"+b);}if(c){akme.handleEvent(c,d,b);}},StorageRequest:function(c,f,d){var e=akme.localStorage;var h=c.callback;var a=d.source;var g=d.origin;if(f){if("importAll"===c.method){e[c.method](akme.parseJSON(f));}else{f=e[c.method](c.type,c.key,f);}}else{f=e[c.method](c.type,c.key);}if(typeof f==="object"){f=akme.formatJSON(f);}var b=c;var c={call:"StorageResponse",method:b.method,type:b.type,key:b.key};if(h){c.callback=h;}var i=this.formatMessage(c,f);if(window.console){console.log(this.id+" "+location.protocol+"//"+location.host+" StorageRequest postMessage back "+String(d.origin||g));}if(d.source){d.source.postMessage(i,d.origin);}else{a.postMessage(i,g);}},StorageResponse:function(c,a){var b=akme.getProperty(window,c.callback);if(b){akme.handleEvent(b,c,akme.parseJSON(a));return;}if(console.logEnabled){alert(akme.formatJSON(c)+"\n\n"+a);}}});}akme.copy(akme,{getParentElementByTagNameClassName:function(c,b,g){if(!c||!b||!g){return null;}var e=b.toUpperCase();var a=c;var i=g.split(" ");while(a&&a.parentNode&&a!=a.parentNode){a=a.parentNode;if(a.nodeName==e){var f=a.className;if(!f){continue;}for(var d=0;d<i.length;d++){var g=i[d];var h=f.indexOf(g);if(h==-1){continue;}if((h==0||" "==f.charAt(h-1))&&(h+g.length==f.length||" "==f.charAt(h+g.length))){return a;}}}}},toggleClass:function(d,g){var f=d.className;var a=[].concat(f.split(" "));var e=[];for(var b=0;b<a.length;b++){if(g!=a[b]){e[e.length]=(a[b]);}}if(e.length==a.length){e[e.length]=(g);}d.className=e.join(" ");},hasClass:function(d,f){var e=d.className;var a=[].concat(e.split(" "));for(var b=0;b<a.length;b++){if(f==a[b]){return true;}}return false;},xml2js:function(g){var f={};if(g.nodeType==1){if(g.attributes.length>0){for(var d=0;d<g.attributes.length;d++){f[g.attributes[d].nodeName]=g.attributes[d].nodeValue;}}}else{if(g.nodeType==3){f["$"]=g.nodeValue;}}if(g.hasChildNodes()){var c,b;for(var e=0;e<g.childNodes.length;e++){c=g.childNodes[e].nodeName;if(typeof(f[c])=="undefined"){f[c]=this.xml2js(g.childNodes[e]);}else{b=f[c];if(typeof(b.length)=="undefined"){b=[b];}if(typeof(b)=="object"){b[b.length]=(this.xml2js(g.childNodes[e]));}f[c]=b;}}}return f;},xml2jsReviver:function(c,d){if(typeof d==="string"&&(c.indexOf("Date",c.length-4)!=-1||c.indexOf("Datetime",c.length-8)!=-1||c.indexOf("DateTime",c.length-8)!=-1)){var b=/^(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z?$/.exec(d);if(b&&d.charAt(d.length-1)==="Z"){return new Date(Date.UTC(+b[1],+b[2]-1,+b[3],+b[4],+b[5],+b[6]));}else{if(b){return new Date(+b[1],+b[2]-1,+b[3],+b[4],+b[5],+b[6]);}}}return d;},timer:{items:[],clear:function(){this.items=[];},add:function(a){this.items.push([a,new Date()]);},getName:function(a){return this.items[a][0];},getValue:function(a){return this.items[a][1];},getDiff:function(a){return this.items[a][1]-this.items[a-1][1];},getDiffOverall:function(){return this.items[this.items.length-1][1]-this.items[0][1];},appendInfoToElement:function(e){var c=this.items;var b=[];for(var d=0;d<c.length;d++){b[b.length]=((c[d][0]?c[d][0]+" : ":"")+(d==0?c[d][1]:c[d][1]-c[d-1][1]));}e.appendChild(document.createTextNode("{"+b.join(", ")+"}"));}}});if(!akme.form){akme.form={getFormElements:function(f){var b=[];var g=["button","input","select","textarea"];for(var e=0;e<g.length;e++){var d=f.getElementsByTagName(g[e]);for(var c=0;c<d.length;c++){b[b.length]=(d[c]);}}return b;},cloneFormElementValues:function(e,h){var c=this.getFormElements(e);var g=this.getFormElements(h);for(var b=0;b<c.length&&b<g.length;b++){var f=c[b];var d=g[b];if(f.checked){d.checked=true;}else{if(f.selectedIndex>=-1){d.selectedIndex=f.selectedIndex;if(f.multiple){for(var a=0;a<f.options.length;a++){if(f.options[a].selected){d.options[a].selected=true;}}}}else{if(f.value){d.value=f.value;}}}}},getValue:function(c){var a=c instanceof NodeList?c[0]:c;var d=a.nodeName.toLowerCase();if("select"==d){return c.options[c.selectedIndex].value;}else{if("input"==d&&("radio"==a.type||"checkbox"==a.type)){if("length" in a){for(var b=0;b<a.length;b++){if(a[b].checked){return a[b].value;}}return"";}return c.checked?c.value:"";}else{return c.value;}}},setValue:function(e,f){var b=e instanceof NodeList?e[0]:e;var g=b.nodeName.toLowerCase();if("select"==g){for(var c=0;c<e.options.length;c++){var a=e.options[c];a.selected=(a.value==f);if(a.selected){e.selectedIndex=c;}}}else{if("input"==g&&("radio"==b.type||"checkbox"==b.type)){if("length" in b){for(var c=0;c<b.length;c++){var d=b[c];d.checked=(f==d.value);}}else{e.checked=(f==e.value);}}else{e.value=f;}}},setChecked:function(a,b){this.setValue(a,b);},setSelected:function(a,b){this.setValue(a,b);},getIntoMap:function(e,g){g=g||{};for(var b=0;b<e.elements.length;b++){var d=e.elements[b];if(!("name" in d)||d.name.length===0){continue;}var f=fw.form.getValue(d);var a=-1;if(d.name in g){var c=g[d.name];if(c instanceof Array){a=c.length;c[c.length]=f;}else{g[d.name]=[c,f];}}else{g[d.name]=f;}if(console.logEnabled){console.log("get ",e.name,(a!=-1?d.name+"["+b+"]":d.name),f);}}return g;},setFromMap:function(d,f){for(var b in f){var c=d.elements[b];if(!c){continue;}var e=f[b];var g=(e instanceof Array);if(!g){e=[e];}if(!(c instanceof NodeList)){c=[c];}for(var a=0;a<e.length&&a<c.length;a++){fw.form.setValue(c[a],e[a]);if(console.logEnabled){console.log("set ",d.name,g?c[a].name+"["+a+"]":c.name,g?c[a].value:c.value);}}}return d;}};}akme.selectHelper=akme.selectHelper||{timeout:1500,timestamp:0,text:"",elem:null,focus:function(b,a){this.text="";this.elem=b;this.timestamp=0;return true;},keypress:function(d){if(!d){d=window.event;}if(!d){return false;}var c=(d.target)?d.target:d.srcElement;if(!c){return false;}var a=d.keyCode?d.keyCode:d.which;var b=new Date().getTime();if(this.timestamp==0){this.timestamp=b;}else{if(this.elem!==c||b-this.timestamp>this.timeout){this.text="";this.timestamp=b;}}this.elem=c;if((a==32||a>=48)&&!String.fromCharCode(a).match(fw.PRINTABLE_EXCLUDE_REGEXP)){if(a!=32){this.text+=String.fromCharCode(a);}this.find(c);if(d.cancelable){d.preventDefault();}if(d.bubbles){d.stopPropagation();}return false;}else{this.text="";this.timestamp=0;return true;}},find:function(d){var c=d.selectedIndex>0?d.selectedIndex:0;var b=c>0?(d.options[c].text.toUpperCase()<this.text.toUpperCase()):false;var e=c>0&&b?c:0;var a=c>0&&!b?c:d.options.length-1;while(e<=a){c=Math.floor(e+(a-e)/2);b=(d.options[c].text.toUpperCase()<this.text.toUpperCase());if(b){e=c+1;}else{a=c-1;}}d.selectedIndex=(b&&c+1<d.options.length)?c+1:c;}};akme.copy(akme.xhr,{getXmlHttpResponse:function(a,h,e,f){var g=new XMLHttpRequest();var d=[0,""];try{if(f){g.open("GET",a+"?"+this.encodeMap(f),false);}else{g.open("GET",a,false);}if(e){for(var c in e){g.setRequestHeader(c,e[c]);}}g.send("");d[0]=g.status;if(!h||(g.status&&g.status!=this.HTTP_OK)){d[1]=g.statusText;}else{d[1]=g.responseText;}}catch(b){d=[b.number,b.description];throw b;}finally{g=null;}return d;},postXmlHttp:function(a,d,f,c){var h=new XMLHttpRequest();var b=[0,""];try{h.open("POST",a,false);var i=false;if(f){for(var g in f){h.setRequestHeader(g,f[g]);if(g.toLowerCase()=="content-type"){i=true;}}}if(!i){h.setRequestHeader(this.CONTENT_TYPE,this.CONTENT_XML[this.CONTENT_TYPE]);}h.send(c);b[0]=h.status;if(!d||(h.status&&h.status!=this.HTTP_OK)){b[1]=h.statusText;}else{b[1]=h.responseText;}}catch(e){b=[e.number,e.description];}finally{h=null;}return b;}});if(!akme._callbasep){akme._callbasep={_tag:"",_lock:[true],_count:0,timeout:9000,cleanup:function(d,b,c){if(!b){b=document;}var a=b.getElementById(d);return(a&&(!c||a.title==c))?a.parentNode.removeChild(a):null;},call:function(f,d,a,e){if(!e){e=document;}var b=this._lock.pop()===true;if(!b||!d||e.getElementById(d)){if(b){this._lock.push(true);}return false;}var g=d+"_"+(++this._count);var c=e.createElement(this._tag);c.id=d;c.className=this._tag+"p";c.title=g;c.src=f;if("iframe"==this._tag){c.onload=function(){setTimeout(d+'(document.getElementById("'+d+'").contentDocument)',0);};}e.body.appendChild(c);if(b){this._lock.push(true);}var h=this;setTimeout(function(){var i=h.cleanup(d,e,g);if(i&&a){a(i);}},this.timeout);return true;}};}if(!akme.iframep){akme.iframep=akme.copy(akme.clone(akme._callbasep),{_tag:"iframe"});}if(!akme.scriptp){akme.scriptp=akme.copy(akme.clone(akme._callbasep),{_tag:"script"});}if(!akme.hsv2rgb){akme.hsv2rgb=function(h){var e,n,l,g,k,b,a,m;var j=h[0]%360;if(h[2]==0){return[0,0,0];}var d=h[1]/100;var c=h[2]/100;var j=j/60;g=Math.floor(j);k=j-g;b=c*(1-d);a=c*(1-(d*k));m=c*(1-(d*(1-k)));switch(g){case 0:e=c;n=m;l=b;break;case 1:e=a;n=c;l=b;break;case 2:e=b;n=c;l=m;break;case 3:e=b;n=a;l=c;break;case 4:e=m;n=b;l=c;break;case 5:e=c;n=b;l=a;break;}return[Math.floor(e*255),Math.floor(n*255),Math.floor(l*255)];};}if(!akme.rgb2hsv){akme.rgb2hsv=function(j){var k,a,g,d,e,b,a;var c=j[0]/255;var l=j[1]/255;var h=j[2]/255;k=Math.min(Math.min(c,l),h);a=Math.max(Math.max(c,l),h);if(k==a){return[undefined,0,a*100];}g=(c==k)?l-h:((l==k)?h-c:c-l);d=(c==k)?3:((l==k)?5:1);e=Math.floor((d-g/(a-k))*60)%360;b=Math.floor(((a-k)/a)*100);a=Math.floor(a*100);return[e,b,a];};}if(!akme.rgb2hex){akme.rgb2hex=function(a){return this.toHexByte(a[0])+this.toHexByte(a[1])+this.toHexByte(a[2]);};}if(!akme.toHexByte){akme.toHexByte=function(a){if(a==null){return"00";}a=parseInt(a);if(a==0||isNaN(a)){return"00";}a=Math.max(0,a);a=Math.min(a,255);a=Math.round(a);return"0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16);};}(function(e,m){if(e.getProperty(e.THIS,m)){return;}var c=":";function n(o){e.core.EventSource.apply(this);this.getStorage=function(){return o;};}e.extend(e.copyAll(n,{CLASS:m}),{getItem:l,getItemJSON:k,setItem:g,removeItem:j,getAll:d,setAll:a,removeAll:h,exportAll:i,importAll:b,clear:f});e.setProperty(e.THIS,m,n);function l(p,o){var q=this.getStorage().getItem(p+c+o);this.doEvent({type:"getItem",keyType:p,key:o,value:q});return q;}function k(p,o){var q=akme.parseJSON(this.getStorage().getItem(p+c+o));this.doEvent({type:"getItem",keyType:p,key:o,value:q});return q;}function g(p,o,q){this.getStorage().setItem(p+c+o,q);this.doEvent({type:"setItem",keyType:p,key:o,value:q});}function g(p,o,q){this.getStorage().setItem(p+c+o,akme.formatJSON(q));this.doEvent({type:"setItem",keyType:p,key:o,value:q});}function j(p,o){this.getStorage().removeItem(p+c+o);this.doEvent({type:"removeItem",keyType:p,key:o});}function d(r){var u=this.getStorage();var t=r+c;var s=0;var o={};for(var q=0;q<u.length;q++){var p=u.key(q);if(p.lastIndexOf(t,t.length)===0){o[p.substring(t.length)]=u.getItem(p);s++;}}this.doEvent({type:"getAll",keyType:r,count:s,result:o});return o;}function a(p,s){var t=this.getStorage();var q=0;for(var r in s){var o=p+c+r;t.setItem(o,s[r]);q++;}this.doEvent({type:"setAll",keyType:p,count:q,map:s});}function h(q){var t=this.getStorage();var s=q+c;var r=0;for(var p=0;p<t.length;p++){var o=t.key(p);if(o.lastIndexOf(s,s.length)===0){t.removeItem(o);r++;}}this.doEvent({type:"removeAll",keyType:q,count:r});}function i(){var r=this.getStorage();var o={};var q=0;for(var p=0;p<r.length;p++){o[r.key(p)]=r.getItem(r.key(p));q++;}this.doEvent({type:"exportAll",count:q,result:o});return o;}function b(q){var r=this.getStorage();var p=0;for(var o in q){r.setItem(o,q[o]);p++;}this.doEvent({type:"importAll",count:p});}function f(){var o=this.size();this.getStorage().clear();this.doEvent({type:"clear",count:o});}})(akme,"akme.core.Storage");if(!akme.localStorage){akme.localStorage=new akme.core.Storage({name:"localStorage",length:typeof localStorage!=="undefined"?localStorage.length:0,size:function(){this.length=localStorage.length;return this.length;},key:function(a){return localStorage.key(a);},getItem:function(a){return localStorage.getItem(a);},setItem:function(a,b){localStorage.setItem(a,b);this.length=localStorage.length;},removeItem:function(a){localStorage.removeItem(a);this.length=localStorage.length;},clear:function(){localStorage.clear();this.length=localStorage.length;}});}if(!akme.sessionStorage){akme.sessionStorage=new akme.core.Storage({name:"sessionStorage",length:typeof sessionStorage!=="undefined"?sessionStorage.length:0,size:function(){this.length=sessionStorage.length;return this.length;},key:function(a){return sessionStorage.key(a);},getItem:function(a){return sessionStorage.getItem(a);},setItem:function(a,b){sessionStorage.setItem(a,b);this.length=window.sessionStorage.length;},removeItem:function(a){sessionStorage.removeItem(a);this.length=window.sessionStorage.length;},clear:function(){sessionStorage.clear();this.length=window.sessionStorage.length;}});}(function(h,m){if(h.getProperty(h.THIS,m)){return;}var b="application/json";function j(p,o){this.name=p;this.url=o;var n=h.getProperty(h.THIS,p);if(typeof n==="function"){this.dataConstructor=n;}h.core.EventSource.apply(this);}h.extend(h.copyAll(j,{CLASS:m}),h.copyAll(new h.core.Access,{clear:i,findOne:f,info:c,read:a,write:l,remove:g}));h.setProperty(h.THIS,m,j);function k(n,o){if("jsonReviver" in this.constructor){return this.constructor.jsonReviver.call(this,n,o);}else{return o;}}function e(n,o){if("jsonReplacer" in this.constructor){return this.constructor.jsonReplacer.call(this,n,o);}else{return o;}}function d(t,n,s,q){var r=null;for(var p=0;p<1;p++){if(p!=0){}r=akme.xhr.open(t,n,false);for(var o in s){r.setRequestHeader(o,s[o]);}if(typeof q!=="undefined"&&q!==null){r.send(q);}else{r.send();}if(r.status!=401){break;}}return r;}function i(){h.sessionStorage.removeAll(self.name);}function f(o){var n=this.find(o);return n.length===0?n[0]:null;}function c(r){var o=this;var q=o.url+"/"+encodeURIComponent(r);var u=d("HEAD",q,{Accept:b},null);var n=u.getResponseHeader("ETag");var t={id:r,rev:(n?n.replace(/^"|"$/g,""):null),status:u.status,statusText:u.statusText};for(var p in {"Cache-Control":1,"Content-Encoding":1,"Content-Length":1,"Content-Type":1,Date:1,ETag:1,Expires:1,"Last-Modified":1,Pragma:1,Server:1,Vary:1,Warning:1}){var s=u.getResponseHeader(p);if(s){t[p]=s;}}if(console.logEnabled){console.log("HEAD "+q,u.status,u.statusText,t.rev);}this.doEvent({type:"info",keyType:this.name,key:r,info:t});return t;}function a(p){var n=this;var o=n.url+"/"+encodeURIComponent(p);var s=d("GET",o,{Accept:b},null);var q=h.xhr.getResponseContentType(s);if(console.logEnabled){console.log("GET "+o,s.status,s.statusText,q);}var r=(s.status<400&&q.indexOf(b)==0)?s.responseText:null;if(r){h.sessionStorage.setItem(n.name,p,r);r=h.parseJSON(r,k);}else{h.sessionStorage.removeItem(n.name,p);}if(this.dataConstructor&&r){r=new this.dataConstructor(r);}this.doEvent({type:"read",keyType:this.name,key:p,value:r});return r;}function l(q,s){var o=this;var u=h.sessionStorage.getItemJSON(o.name,q);if(u&&u._id){s._id=u._id;s._rev=u._rev;}var p=o.url+"/"+encodeURIComponent(q);var t=d("PUT",p,{Accept:b,"Content-Type":b},typeof s=="string"?s:h.formatJSON(s,e));var r=h.xhr.getResponseContentType(t);if(console.logEnabled){console.log("PUT "+p,t.status,t.statusText,r);}var n=(r.indexOf(b)==0)?h.parseJSON(t.responseText):t.responseText;if(n.ok&&n.rev){s._id=n.id;s._rev=n.rev;h.sessionStorage.setItem(o.name,q,h.formatJSON(s,e));}this.doEvent({type:"write",keyType:this.name,key:q,value:s});return n;}function g(r,o){var p=this;if(!o){var q=p.url+"/"+encodeURIComponent(r);var t=d("HEAD",q,{Accept:b});o=t.getResponseHeader("ETag");if(o){o=o.replace(/^"|"$/g,"");}if(!o){o="";}}var q=p.url+"/"+encodeURIComponent(r)+"?rev="+encodeURIComponent(o);var t=d("DELETE",q,{Accept:b});var s=h.xhr.getResponseContentType(t);if(console.logEnabled){console.log("DELETE "+q,t.status,t.statusText,s);}var n=(s.indexOf(b)==0)?h.parseJSON(t.responseText):t.responseText;if(n.ok&&n.rev){h.sessionStorage.removeItem(p.name,r);}this.doEvent({type:"remove",keyType:this.name,key:r});return n;}})(akme,"akme.core.CouchAccess");(function(i,n){if(i.getProperty(i.THIS,n)){return;}var b="application/json";function j(q,p){this.name=q;this.url=p;var o=i.getProperty(i.THIS,q);if(typeof o==="function"){this.dataConstructor=o;}i.core.EventSource.apply(this);}i.extend(i.copyAll(j,{CLASS:n}),i.copyAll(new i.core.Access,{clear:k,findOne:g,info:c,read:a,write:m,remove:h}));i.setProperty(i.THIS,n,j);function l(o,p){if("jsonReviver" in this.constructor){return this.constructor.jsonReviver.call(this,o,p);}else{return p;}}function f(o,p){if("jsonReplacer" in this.constructor){return this.constructor.jsonReplacer.call(this,o,p);}else{return p;}}function e(t,o,s,p,q){var r=new XMLHttpRequest();d(r,t,o,s,p,q);return r;}function d(t,u,o,s,q,r){t.open(u,o,true);t.setRequestHeader("X-Requested-With","XMLHttpRequest");for(var p in s){t.setRequestHeader(p,s[p]);}t.onreadystatechange=function(){var v=this;if(v.readyState==4){i.handleEvent(r,{type:"readystatechange",target:v});}};if(typeof q!=="undefined"){t.send(q);}else{t.send();}return;}function k(){i.sessionStorage.removeAll(self.name);}function g(p){var o=this.find(p);return o.length===0?o[0]:null;}function c(r,s){var o=this;var q=o.url+"/"+encodeURIComponent(r);var t=e("HEAD",q,{Accept:b},null,p);function p(w){var z=w.target;var u=z.getResponseHeader("ETag");var y={id:r,rev:(u?u.replace(/^"|"$/g,""):null),status:z.status,statusText:z.statusText};for(var v in {"Cache-Control":1,"Content-Encoding":1,"Content-Length":1,"Content-Type":1,Date:1,ETag:1,Expires:1,"Last-Modified":1,Pragma:1,Server:1,Vary:1,Warning:1}){var x=z.getResponseHeader(v);if(x){y[v]=x;}}if(console.logEnabled){console.log("HEAD "+q,z.status,z.statusText,y.rev);}o.doEvent({type:"info",keyType:o.name,key:r,info:y});i.handleEvent(s,y);o=z=r=s=null;}return t;}function a(r,s){var o=this;var q=o.url+"/"+encodeURIComponent(r);var t=e("GET",q,{Accept:b},null,p);function p(v){var x=v.target;var u=i.xhr.getResponseContentType(x);if(console.logEnabled){console.log("GET "+q,x.status,x.statusText,u);}var w=(x.status<400&&u.indexOf(b)==0)?x.responseText:null;if(w){i.sessionStorage.setItem(o.name,r,w);w=i.parseJSON(w,l);}else{i.sessionStorage.removeItem(o.name,r);}if(o.dataConstructor&&w){w=new o.dataConstructor(w);}o.doEvent({type:"read",keyType:o.name,key:r,value:w});i.handleEvent(s,w);o=x=r=s=null;}return t;}function m(r,t,s){var o=this;var v=i.sessionStorage.getItemJSON(o.name,r);if(v&&v._id){t._id=v._id;t._rev=v._rev;}var q=o.url+"/"+encodeURIComponent(r);var u=e("PUT",q,{Accept:b,"Content-Type":b},typeof t=="string"?t:i.formatJSON(t,f),p);function p(y){var z=y.target;var x=i.xhr.getResponseContentType(z);if(console.logEnabled){console.log("PUT "+q,z.status,z.statusText,x);}var w=(x.indexOf(b)==0)?i.parseJSON(z.responseText):z.responseText;if(w.ok&&w.rev){t._id=w.id;t._rev=w.rev;i.sessionStorage.setItem(o.name,r,i.formatJSON(t,f));}o.doEvent({type:"write",keyType:o.name,key:r,value:t});i.handleEvent(s,w);o=z=r=t=s=null;}return u;}function h(u,q,p){var w=this;var v=new XMLHttpRequest();var o=null;if(!q){o=w.url+"/"+encodeURIComponent(u);d(v,"HEAD",o,{Accept:b},null,t);}else{r();}function t(x){var y=x.target;q=y.getResponseHeader("ETag");if(q){q=q.replace(/^"|"$/g,"");}if(!q){q="";}r();}function r(){o=w.url+"/"+encodeURIComponent(u)+"?rev="+encodeURIComponent(q);d(v,"DELETE",o,{Accept:b},null,s);}function s(z){v=z.target;var y=i.xhr.getResponseContentType(v);if(console.logEnabled){console.log("DELETE "+o,v.status,v.statusText,y);}var x=(y.indexOf(b)==0)?i.parseJSON(v.responseText):v.responseText;if(x.ok&&x.rev){i.sessionStorage.removeItem(w.name,u);}w.doEvent({type:"remove",keyType:w.name,key:u});i.handleEvent(p,x);w=v=o=u=q=p=null;}return v;}})(akme,"akme.core.CouchAsyncAccess");