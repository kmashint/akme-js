/**
 * @class Jaml
 * @author Ed Spencer (http://edspencer.net)
 * Jaml is a simple JavaScript library which makes HTML generation easy and pleasurable.
 * Examples: http://edspencer.github.com/jaml
 * Introduction: http://edspencer.net/2009/11/jaml-beautiful-html-generation-for-javascript.html
 */
Jaml=function(){return{templates:{},register:function(a,b){this.templates[a]=b},render:function(a,b,c){var d=this.templates[a],e=new Jaml.Template(d);return e.render.apply(e,Array.prototype.slice.call(arguments,1))}}}();Jaml.Node=function(a){this.tagName=a;this.attributes={};this.children=[]};Jaml.Node.prototype={setAttributes:function(a){for(var b in a){var c=b=="cls"?"class":b;this.attributes[c]=a[b]}return this},addChild:function(a){this.children.push(a);return this},render:function(a){a=a||0;var b=[],c=[],d=this instanceof Jaml.TextNode,e=this.multiLineTag();if(!d)b.push(this.getPadding(a));b.push("<"+this.tagName);for(var f in this.attributes){c.push(f+'="'+this.attributes[f]+'"')}c.sort();for(var g=0;g<c.length;g++){b.push(" "+c[g])}if(this.isSelfClosing()&&this.children.length==0){b.push("/>\n")}else{b.push(">");if(e)b.push("\n");this.renderChildren(b,this.children,a);if(e)b.push(this.getPadding(a));b.push("</",this.tagName,">\n")}return b.join("")},renderChildren:function(a,b,c){var d=c+2;for(var e=0;e<b.length;e++){var f=b[e];if(f instanceof Array){var g=f;this.renderChildren(a,g,c)}else{a.push(f.render(d))}}},multiLineTag:function(){var a=this.children.length,b=a>0;if(a==1&&this.children[0]instanceof Jaml.TextNode)b=false;return b},getPadding:function(a){return(new Array(a+1)).join(" ")},isSelfClosing:function(){for(var a=this.notSelfClosingTags.length-1;a>=0;a--){if(this.tagName==this.notSelfClosingTags[a])return false}return true},notSelfClosingTags:["textarea","script","em","strong","option","select"]};Jaml.TextNode=function(a){this.text=a};Jaml.TextNode.prototype={render:function(){return this.text}};Jaml.Template=function(a){this.tpl=a;this.nodes=[]};Jaml.Template.prototype={render:function(thisObj,data){data=data||(thisObj=thisObj||{});if(data.constructor.toString().indexOf("Array")==-1){data=[data]}with(this){for(var i=0;i<data.length;i++){eval("("+this.tpl.toString()+").call(thisObj, data[i], i)")}}var roots=this.getRoots(),output="";for(var i=0;i<roots.length;i++){output+=roots[i].render()}return output},getRoots:function(){var a=[];for(var b=0;b<this.nodes.length;b++){var c=this.nodes[b];if(c.parent==undefined)a.push(c)}return a},tags:["html","head","body","script","meta","title","link","div","p","span","a","img","br","hr","em","strong","table","tr","th","td","thead","tbody","tfoot","ul","ol","li","dl","dt","dd","h1","h2","h3","h4","h5","h6","h7","form","fieldset","input","textarea","label","select","option"]};(function(){var a=Jaml.Template.prototype.tags;var b=function(a){return function(b){var c=new Jaml.Node(a);var d=typeof b=="object"&&!(b instanceof Jaml.Node)&&!(b instanceof Jaml.TextNode);if(d)c.setAttributes(b);var e=d?1:0;for(var f=e;f<arguments.length;f++){var g=arguments[f];if(typeof g=="string"||g==undefined){g=new Jaml.TextNode(g||"")}if(g instanceof Jaml.Node||g instanceof Jaml.TextNode){g.parent=c}c.addChild(g)}this.nodes.push(c);return c}};for(var c=0,d;d=a[c];c++){Jaml.Template.prototype[d]=b(d)}})();var Jaml;